<!DOCTYPE html>
<html lang="en">
<head>
    <title>User Details</title>
    <style>
        #block{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        h1{
            display: flex;
            justify-content: center;
        }
        .buttonPost{
            width: 90vw;
        }
        /*.block{*/
        /*    display: flex;*/
        /*    justify-content: center;*/
        /*    align-items: center;*/
        /*}*/

    </style>
</head>
<body>
<h1>User Details</h1>
<div class="block">
    <script>

        const userId = new URL(location.href).searchParams.get('userId');

        fetch(`https://jsonplaceholder.typicode.com/users/${userId}`)
            .then(response => response.json())
            .then(user => {

                const block = document.createElement('wrap');
                block.id = 'block'
                const ul = document.createElement('ul');
                recursiveBuild(user, ul);
                block.appendChild(ul);
                const button = document.createElement('button');
                button.className = 'buttonPost'
                button.innerText = 'Post of Current User';
                button.onclick = () => {
                    location.href = `post-list.html?userId=${userId}`
                }
                block.appendChild(button)
                document.body.appendChild(block);
            });


        function liCreator(key, value, parent) {
            const li = document.createElement('li');
            li.innerHTML = `<b>${key}:</b> ${value}`;
            parent.appendChild(li);
        }

        function ulBuilder(key, object, parent) {
            const li = document.createElement('li');
            const ul = document.createElement('ul');
            li.innerHTML = `<b>${key}:</b>`;
            parent.appendChild(li);
            li.appendChild(ul);
            recursiveBuild(object, ul);
        }

        function recursiveBuild(object, parent) {
            for (const key in object) {
                typeof object[key] === 'object'
                    ? ulBuilder(key, object[key], parent)
                    : liCreator(key, object[key], parent)
            }
        }


        // document.body.appendChild(button);

        // На странице user-details.html:
        // 4 Вивести всю, без виключення, інформацію про об'єкт user на який клікнули
        // 5 Додати кнопку "post of current user", при кліку на яку, з'являються title всіх постів поточного юзера
        // (для получения постов используйте эндпоинт https://jsonplaceholder.typicode.com/users/USER_ID/posts)
        //         6 Каждому посту додати кнопку/посилання, при кліку на яку відбувається перехід на сторінку post-details.html, котра має детальну інфу про поточний пост.
        //


        //         user-details.html - блок з інфою про user зверху сторінки. Кнопка нижчє, на 90% ширини сторінки, по центру.
        //         блоки з короткою іфною про post - в ряд по 5 .

    </script>
</div>
</body>
</html>

